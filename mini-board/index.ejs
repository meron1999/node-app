<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" crossorigin="anonymous">
    <title>ミニメッセージボード</title>
    <script>
        function init(){
            var id =localStorage.getItem("id");
            if(id == null){
                location.href = "./login";
            } else {
                document.querySelector('#id').textContent ='ID:' + id;
                document.querySelector('#id_input').value = id;
            }
        }
    </script>
</head>

<body class="container" onload="init();">
<header>
    <h1 class="display-4">ミニメッセージボード</h1>
</header>
<div role="main">
    <p>※メッセージは最大10個まで保存されます</p>
    <form method="post" action="/">
        <p id ="id"></p>
        <input type ="hidden" id="id_input" name="id">
        <div class="form-group">
            <label for="msg">Message</label>
            <input type="text" class="form-control" id="msg" name="msg" placeholder="メッセージ">
        </div>
        <input type="submit" class="btn btn-primary" value="送信">
    </form>

<table class="table">
       <% for(var i in data){ %>
       <%- include('data_item',{val:data[i]}) %>
       <% } %>
</table>
</div>
</body>
</html>